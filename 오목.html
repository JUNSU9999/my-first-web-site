<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>오목 게임</title>
  <style>
    #game-board {
      margin: 0 auto;
      border: 1px solid black;
    }
    td {
      width: 30px;
      height: 30px;
      border: 1px solid black;
    }
    .black-stone {
      background-color: black;
      border-radius: 50%;
    }
    .white-stone {
      background-color: white;
      border: 2px solid black;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <table id="game-board"></table>

  <script>
    const ROWS = 15;
    const COLS = 15;
    const BLACK_STONE = 'black';
    const WHITE_STONE = 'white';

    let gameBoard = [];
    let currentPlayer = BLACK_STONE;

    // 게임판 초기화
    function initGameBoard() {
      for (let i = 0; i < ROWS; i++) {
        let row = [];
        for (let j = 0; j < COLS; j++) {
          row.push(null);
        }
        gameBoard.push(row);
      }
    }

    // 게임판 그리기
    function drawGameBoard() {
      let table = document.getElementById('game-board');
      for (let i = 0; i < ROWS; i++) {
        let row = document.createElement('tr');
        for (let j = 0; j < COLS; j++) {
          let cell = document.createElement('td');
          cell.dataset.row = i;
          cell.dataset.col = j;
          cell.addEventListener('click', handleCellClick);
          row.appendChild(cell);
        }
        table.appendChild(row);
      }
    }

    // 셀 클릭 이벤트 핸들러
    function handleCellClick(event) {
      let row = parseInt(event.target.dataset.row);
      let col = parseInt(event.target.dataset.col);
      if (gameBoard[row][col] === null) {
        event.target.classList.add(currentPlayer === BLACK_STONE ? 'black-stone' : 'white-stone');
        gameBoard[row][col] = currentPlayer;
        if (checkForWin(row, col)) {
          alert(`${currentPlayer === BLACK_STONE ? '흑' : '백'} 승리!`);
          resetGameBoard();
        } else if (checkForDraw()) {
          alert('무승부!');
          resetGameBoard();
        } else {
          currentPlayer = currentPlayer === BLACK_STONE ? WHITE_STONE : BLACK_STONE;
        }
      }
    }

    // 승리 확인
    function checkForWin(row, col) {
      let directions = [
        [0, 1], [1, 0], [1, 1], [-1, 1]
      ];
      for (let i = 0; i < directions.length; i++) {
        let count = 1;
        let dx = directions[i][0];
        let dy = directions[i][1];
        let r = row + dx;
        let c = col + dy;
        while
        (r >= 0 && r < ROWS && c >= 0 && c < COLS && gameBoard[r][c] === currentPlayer) {
      count++;
      r += dx;
      c += dy;
    }
    dx = -directions[i][0];
    dy = -directions[i][1];
    r = row + dx;
    c = col + dy;
    while (r >= 0 && r < ROWS && c >= 0 && c < COLS && gameBoard[r][c] === currentPlayer) {
      count++;
      r += dx;
      c += dy;
    }
    if (count >= 5) {
      return true;
    }
  }
  return false;
}

// 무승부 확인
function checkForDraw() {
  for (let i = 0; i < ROWS; i++) {
    for (let j = 0; j < COLS; j++) {
      if (gameBoard[i][j] === null) {
        return false;
      }
    }
  }
  return true;
}

// 게임판 초기화
function resetGameBoard() {
  gameBoard = [];
  currentPlayer = BLACK_STONE;
  let table = document.getElementById('game-board');
  while (table.firstChild) {
    table.removeChild(table.firstChild);
  }
  initGameBoard();
  drawGameBoard();
}

// 게임 시작
function startGame() {
  initGameBoard();
  drawGameBoard();
}

startGame();